# Коррекция перекоса

Программная коррекция перекоса может помочь устранить неточности в размерах, возникающие в результате неправильной квадратной сборки принтера. Обратите внимание, что если ваш принтер сильно перекошен, настоятельно рекомендуется сначала использовать механические средства, чтобы придать принтеру как можно более квадратную форму, прежде чем применять коррекцию на основе программного обеспечения.

## Печать Объекта Калибровки

Первым шагом в исправлении перекоса является печать [калибровочного объекта](https://www.thingiverse.com/thing:2563185/files ) вдоль плоскости, которую вы хотите исправить. Существует также [объект калибровки](https://www.thingiverse.com/thing:2972743 ), который включает в себя все плоскости в одной модели. Вы хотите, чтобы объект был ориентирован так, чтобы угол A был направлен к началу плоскости.

Убедитесь, что во время этой печати не применяется коррекция перекоса. Вы можете сделать это, либо удалив модуль `[skew_correction]` из файла printer.cfg, либо введя gcode `SET_SKEW CLEAR=1`.

## Проведите свои измерения

Модуль `[skew_correcton]` требует проведения трех измерений для каждой плоскости, которую необходимо скорректировать: длина от угла A до угла C, длина от угла B до угла D и длина от угла A до угла D. При измерении длины AD не учитывайте плоские поверхности на углах, которые предусмотрены в некоторых тестовых объектах.

![skew_lengths](img/skew_lengths.png)

## Настройка перекоса

Убедитесь, что `[skew_correction]` находится в файле print.cfg. Теперь вы можете использовать gcode `SET_SKEW` для настройки skew_correton. Например, если ваши измеренные длины по XY следующие:

```
Длина АС = 140,4
Длина BD = 142,8
Длина AD = 99,8
```

`SET_SKEW` можно использовать для настройки коррекции перекоса плоскости XY.

```
SET_SKEW XY=140.4,142.8,99.8
```

Вы также можете добавить размеры XZ и YZ в gcode:

```
SET_SKEW XY=140.4,142.8,99.8 XZ=141.6,141.4,99.8 YZ=142.4,140.5,99.5
```

Модуль `[skew_correction]` также поддерживает управление профилями аналогично `[bed_mesh]`. После настройки перекоса с помощью gcode `SET_SKEW` вы можете использовать gcode `SKEW_PROFILE` для его сохранения:

```
SKEW_PROFILE SAVE=my_skew_profile
```

После этой команды вам будет предложено ввести gcode `SAVE_CONFIG` для сохранения профиля в постоянном хранилище. Если ни один профиль не имеет имени «my_skew_profile», будет создан новый профиль. Если именованный профиль существует, он будет перезаписан.

Если у вас есть сохраненный профиль, вы можете загрузить его:

```
SKEW_PROFILE LOAD=my_skew_profile
```

Также возможно удалить старый или устаревший профиль:

```
SKEW_PROFILE REMOVE=my_skew_profile
```

После удаления профиля вам будет предложено выполнить `SAVE_CONFIG`, чтобы это изменение сохранилось.

## Проверка исправления

После настройки skew_correction вы можете перепечатать калибровочную часть с включенной коррекцией. Используйте следующий gcode, чтобы проверить перекос на каждой плоскости. Результаты должны быть ниже, чем те, которые сообщаются через `GET_CURRENT_SKEW`.

```
CALC_MEASURED_SKEW AC=<ac_length> BD=<bd_length> AD=<ad_length>
```

## Оговорки

Из-за характера коррекции перекоса рекомендуется настроить перекос в начальном gcode после возврата в исходное положение и любого движения, совершающегося вблизи края области печати, например продувки или протирания сопла. Для этого вы можете использовать g-коды `SET_SKEW` или `SKEW_PROFILE`. Также рекомендуется указать `SET_SKEW CLEAR=1` в конечном gcode.

Имейте в виду, что `[skew_correction]` может генерировать коррекцию, которая перемещает инструмент за пределы границ принтера по осям X и/или Y. При использовании `[skew_correction]` рекомендуется располагать детали подальше от краев.

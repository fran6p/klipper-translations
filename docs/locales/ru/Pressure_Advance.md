# Повышение давления

В этом документе содержится информация о настройке переменной конфигурации "повышение давления" для конкретного сопла и нити накала. Функция повышения давления может быть полезна для уменьшения количества мелких дефектов. Для получения дополнительной информации о том, как реализуется повышение давления, см. [kinematics](Kinematics.md) документ.

## Настройка опережения давления

Повышение давления делает две полезные вещи - уменьшает образование ила при движении без выдавливания и уменьшает образование пузырьков при прохождении поворотов. В этом руководстве в качестве механизма настройки используется вторая функция (уменьшение размытости при прохождении поворотов).

Для калибровки опережения давления принтер должен быть сконфигурирован и работать, поскольку тест настройки включает в себя печать и проверку тестируемого объекта. Рекомендуется прочитать этот документ полностью перед запуском теста.

С помощью слайсера сгенерируйте g-код для большого полого квадрата, представленного в файле [docs/prints/square_tower.stl](prints/square_tower.stl). Используйте высокую скорость (например, 100 мм/с), нулевое заполнение и грубую высоту слоя (высота слоя должна составлять около 75% от диаметра сопла). Убедитесь, что в слайсере отключено "управление динамическим ускорением".

Подготовьтесь к тестированию, выполнив следующую команду G-Code:

```
SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=1 ACCEL=500
```

Эта команда заставляет сопло медленнее проходить углы, чтобы подчеркнуть влияние давления экструдера. Затем для принтеров с прямым приводом экструдера выполните команду:

```
TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.005
```

Для длинных боуденовских экструдеров используйте:

```
TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.020
```

Затем распечатайте объект. Полностью распечатанный тестовый отпечаток выглядит так:

![tuning_tower](img/tuning_tower.jpg)

Приведенная выше команда TUNING_TOWER указывает Klipper изменить настройку давления_advance на каждом слое печати. Для более высоких слоев печати будет установлено большее значение опережения давления. У слоев ниже идеальной настройки давления_advance будут пятна по углам, а слои выше идеальной настройки могут привести к закруглению углов и плохой экструзии, ведущей к углу.

Можно отменить печать раньше, если заметите, что углы больше не печатаются должным образом (и, таким образом, можно избежать печати слоев, которые, как известно, превышают идеальное значение Pressure_advance).

Осмотрите отпечаток, а затем с помощью цифрового штангенциркуля определите высоту, на которой углы наилучшего качества. Если сомневаетесь, отдайте предпочтение меньшей высоте.

![tune_pa](img/tune_pa.jpg)

Затем значение давления_advance можно рассчитать как `pressure_advance = <start> + <measured_height> * <factor>`. (Например, `0 + 12,90 *.020` будет `.258`.)

Можно выбрать пользовательские настройки для СТАРТ и ФАКТОР, если это поможет определить наилучшую настройку опережения давления. При этом обязательно вводите команду TUNING_TOWER в начале каждой тестовой печати.

Типичные значения опережения давления составляют от 0,050 до 1,000 (верхний предел обычно только для экструдеров Боудена). Если при увеличении давления до 1000 не происходит значительного улучшения, то увеличение давления вряд ли улучшит качество отпечатков. Вернитесь к конфигурации по умолчанию с отключенным опережением давления.

Хотя эта настройка напрямую улучшает качество углов, стоит помнить, что хорошая конфигурация опережения давления также уменьшает растекание по всему отпечатку.

По завершении этого теста установите `pressure_advance = <calculated_value>` в разделе `[extruder]` файла конфигурации и введите команду RESTART. Команда RESTART очистит состояние тестирования и вернет скорости ускорения и прохождения поворотов к нормальным значениям.

## Важные заметки

* Величина опережения давления зависит от экструдера, сопла и нити. Обычно для нитей разных производителей или с разными пигментами требуются значительно разные значения опережения давления. Поэтому необходимо калибровать опережение давления на каждом принтере и на каждой катушке нити.
* Температура печати и скорость экструзии могут влиять на повышение давления. Обязательно настройте [расстояние вращения экструдера](Rotation_Distance.md#calibating-rotation_distance-on-extrumers) и [температуру сопла](http://reprap.org/wiki/Triffid_Hunter%27s_Calibration_Guide#Nozzle_Temperature) перед настройкой повышения давления.
* Тестовая печать рассчитана на высокую скорость потока экструдера, но в остальном «нормальные» настройки слайсера. Высокая скорость потока достигается за счет использования высокой скорости печати (например, 100 мм/с) и высоты грубого слоя (обычно около 75% диаметра сопла). Другие настройки среза должны быть аналогичны настройкам по умолчанию (например, периметры 2 или 3 строк, нормальная величина отвода). Может оказаться полезным установить скорость внешнего периметра такой же, как и скорость остальной части печати, но это не является обязательным требованием.
* Обычно тестовый отпечаток демонстрирует различное поведение на каждом углу. Часто слайсер меняет слои в одном углу, что может привести к тому, что этот угол будет значительно отличаться от остальных трех углов. Если это произойдет, игнорируйте этот угол и настройте усиление давления, используя три других угла. Остальные углы также часто немного различаются. (Это может произойти из-за небольших различий в том, как корпус принтера реагирует на повороты в определенных направлениях.) Постарайтесь выбрать значение, которое подходит для всех остальных углов. В случае сомнений отдайте предпочтение более низкому значению опережения давления.
* Если используется высокое значение опережения давления (например, более 0,200), то можно обнаружить, что экструдер пропускает работу при возвращении к нормальному ускорению принтера. Система повышения давления учитывает давление, вставляя дополнительную нить во время ускорения и втягивая ее во время замедления. При высоком ускорении и высоком давлении экструдер может не иметь достаточного крутящего момента для выталкивания необходимой нити. В этом случае либо используйте более низкое значение ускорения, либо отключите повышение давления.
* После того, как в Klipper настроено продвижение давления, все равно может быть полезно настроить небольшое значение отвода в слайсере (например, 0,75 мм) и использовать опцию слайсера «очистка при отводе», если она доступна. Эти настройки слайсера могут помочь предотвратить слипание, вызванное слипанием нити (нить выдергивается из сопла из-за липкости пластика). Рекомендуется отключить опцию слайсера «Z-подъем при втягивании».
* Система опережения давления не меняет время или траекторию движения головки инструмента. Печать с включенным увеличением давления займет такое же время, как и печать без увеличения давления. Увеличение давления также не меняет общее количество нити, выдавливаемой во время печати. Увеличение давления приводит к дополнительному движению экструдера во время ускорения и замедления. Настройка подачи очень высокого давления приведет к очень большому движению экструдера во время ускорения и замедления, и никакие настройки конфигурации не ограничивают величину этого движения.
